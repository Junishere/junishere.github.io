<!DOCTYPE html>
<html>
    <head>
        <title>slide</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <header>
            <h1>Slide</h1>
        </header>
        <nav>
            <a href="../animation/animation.html">go back</a>
            <br>
            
            <a href="animation.html">Animation</a>
        </nav>
        <section>
            <canvas id="myCanvas" width="1400" height="700"></canvas>
        </section>
        <footer>
            <p>&copy; 2019</p>
        </footer>
        <script>
            var canvas;
            var ctx;
            var requestId;
            var positionX = 0;
            var isfacingright = true;
            const UNIT = 7;
            window.onload = init;
            function init() {
                canvas = document.getElementById("myCanvas");
                ctx = canvas.getContext("2d");
                
                startAnimation();


            }
            function startAnimation() {
                requestId = requestAnimationFrame(animationLoop);
            }
            function animationLoop(timeStamp) {
                // First line inside animationLoop
                ctx.clearRect(0,0,canvas.width,canvas.height);
                drawbackground();
                changePositionX();
                changeisFacingRight();
                animatebulletbill();
                
                // Last line inside animationLoop
                requestId = requestAnimationFrame(animationLoop);
            }
            function drawbackground() {
                // ctx.fillStyle="lightblue"
                // ctx.fillRect(0,0,canvas.width,canvas.height);
                drawBricks(0,84,17);
            }   

                function animatebulletbill() {
                if (isFacingRight == true) {
                    drawBulletBill(positionX, 68, 1);
                } else if (isFacingRight == false) {
                    ctx.save();
                    ctx.scale(-1,1);
                    drawBulletBill(-positionX,68,1);
                    ctx.restore();
                }
            }
            
                function changePositionX() {
                if (isFacingRight == true) {
                    positionX +=1;
                } else if (isFacingRight ==false) {
                    positionX -=1;
                }
            }
            
                function changeisFacingRight() {
            if (positionX > canvas.width / UNIT+4*UNIT) {
                isfacingRight = false;
            } else if (positionX < -4*UNIT) {
                isFacingRight = true;
            }
        } 
        </script>
        <script src="../drawing/Bricks.js"></script>
        <script src="../drawing/BulletBill.js"></script>
    </body>

</html>