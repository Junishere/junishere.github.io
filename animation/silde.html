<!DOCTYPE html>
<html>
    <head>
        <title>slide</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <header>
            <h1>Slide</h1>
        </header>
        <nav>
            <a href="../animation/animation.html">go back</a>
            <br>
            
            <a href="animation.html">Animation</a>
        </nav>
        <section>
            <canvas id="myCanvas" width="1400" height="700"></canvas>
        </section>
        <footer>
            <p>&copy; 2019</p>
        </footer>
        <script>
            var canvas;
            var ctx;
            var requestId;
            var BulletBillPositionX = 0;
            var isFacingRight = true
            const UNIT = 7;
            window.onload = init;
            function init() {
                canvas = document.getElementById("myCanvas");
                ctx = canvas.getContext("2d"); 
                
                startAnimation(); 


        }
        function startAnimation() {
            requestId = requestAnimationFrame(animationLoop);
        }
        function animationLoop(timeStamp) {
            // First line inside animationLoop
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawbackground();
            animateBulletBill();
            changePositionX();
            drawBricks();
            requestId = requestAnimationFrame(animationLoop);

        }
        function drawbackground() {
            ctx.fillStyle = "red";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawBricks(0, 84, 14);
        }

        function animateBulletBill() {
            if (isFacingRight == true) {
                drawBulletBill(BulletBillPositionX, 40,1);
            } else if (isFacingRight == false) {
                ctx.save();
                ctx.scale(-1,1);
                animateBulletBill(-BulletBillPositionX,40,1);
                ctx.restore();
            }
        }

        function changePositionX() {
            if (positionX >= canvas.width/UNIT) {
                positionX = -12;
            } else {
                positionX += 1.2;
            }
        }

        function changeisFacingRight() {
            if (changePositionX > canvas.width / UNIT+4*UNIT)  {
                isFacingRight = false;
            } else if (BulletBillPositionX <0*UNIT) {
                isFacingRight = true;
            }
        }
        
        </script>
        <script src="../drawing/drawBricks.js"></script>
        <script src="../drawing/drawBulletBill.js"></script>
    </body>

</html>